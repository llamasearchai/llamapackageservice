# LlamaSearchAI Advanced Configuration
# Complete configuration for all advanced features

# Organization Settings
organization: "llamasearchai"
github_token: "${GITHUB_TOKEN}"  # Use environment variable

# Repository Management
repository_settings:
  local_repos_path: "~/Development/llamasearchai"
  backup_path: "~/Backups/llamasearchai"
  auto_sync_interval: 3600  # seconds
  
  # Repository-specific configurations
  repos:
    llamaagent:
      priority: critical
      auto_sync: true
      security_scanning: true
      performance_monitoring: true
      auto_remediation: true
      protected_branches: ["main", "production"]
      required_checks:
        - "tests"
        - "security-scan"
        - "code-quality"
    
    llamagraph:
      priority: high
      auto_sync: true
      security_scanning: true
      performance_monitoring: true
      
    llama-cli:
      priority: high
      auto_sync: true
      security_scanning: true

# Security Configuration
security:
  # Token Storage
  secure_token_storage:
    enabled: true
    master_key_path: "~/.llamasearch/security/master.key"
    rotation_days: 90
  
  # Authentication
  authentication:
    require_mfa: true
    session_timeout_hours: 24
    max_login_attempts: 5
    lockout_duration_minutes: 30
    
  # RBAC Roles
  roles:
    admin:
      permissions: ["*"]
      users: ["admin@llamasearchai.com"]
    
    developer:
      permissions:
        - "repo:read"
        - "repo:write"
        - "repo:analyze"
        - "workflow:execute"
      users: ["dev@llamasearchai.com"]
    
    analyst:
      permissions:
        - "repo:read"
        - "repo:analyze"
        - "report:read"
        - "report:write"
      users: ["analyst@llamasearchai.com"]
  
  # Security Scanning
  scanning:
    enabled: true
    schedule: "0 0 * * *"  # Daily
    vulnerability_threshold: "medium"
    auto_fix_enabled: true
    auto_fix_severity: ["critical", "high"]
    
    # Custom security rules
    custom_rules:
      - pattern: 'api[_-]?key\s*=\s*["\'][^"\']+["\']'
        severity: critical
        description: "Hardcoded API key"
        
      - pattern: 'TODO:?\s*security'
        severity: medium
        description: "Security TODO found"
    
  # Audit Configuration
  audit:
    enabled: true
    retention_days: 365
    log_path: "~/.llamasearch/audit"
    
# Performance Configuration
performance:
  # Resource Limits
  resource_limits:
    max_memory_mb: 8192
    max_cpu_percent: 80
    max_parallel_workers: 16
    
  # Caching
  caching:
    enabled: true
    max_cache_size_mb: 1024
    ttl_seconds: 3600
    cache_strategy: "adaptive"  # lru, lfu, adaptive
    
  # Connection Pooling
  connection_pool:
    size: 100
    timeout_seconds: 30
    max_retries: 3
    
  # Optimization
  optimization:
    enable_streaming: true
    chunk_size_mb: 1
    enable_compression: true
    enable_lazy_loading: true

# Analytics Configuration
analytics:
  # Metrics Collection
  metrics:
    enabled: true
    collection_interval: 300  # seconds
    retention_days: 90
    
    # Metrics to collect
    collect:
      - code_quality
      - test_coverage
      - security_score
      - performance_metrics
      - dependency_health
      - contributor_activity
  
  # Reporting
  reporting:
    auto_generate: true
    schedule: "0 0 * * 1"  # Weekly
    formats: ["html", "pdf", "json"]
    recipients:
      - "reports@llamasearchai.com"
    
  # Visualizations
  visualizations:
    enabled: true
    dashboard_url: "http://localhost:8000/analytics"
    charts:
      - repository_health
      - code_quality_trends
      - security_overview
      - contributor_activity
      - dependency_graph

# Collaboration Configuration
collaboration:
  # Real-time Sessions
  realtime:
    enabled: true
    websocket_port: 8001
    max_sessions: 100
    session_timeout_minutes: 120
    
  # Code Review
  code_review:
    auto_review_enabled: true
    ai_review_enabled: true
    auto_approve_threshold: 0.95
    require_human_review:
      - "security-critical"
      - "api-changes"
      - "database-migrations"
    
  # Notifications
  notifications:
    channels:
      email:
        enabled: true
        smtp_server: "smtp.gmail.com"
        smtp_port: 587
        from_address: "noreply@llamasearchai.com"
        
      slack:
        enabled: true
        webhook_url: "${SLACK_WEBHOOK_URL}"
        channels:
          security: "#security-alerts"
          general: "#github-updates"
          critical: "#critical-issues"
          
      discord:
        enabled: false
        webhook_url: "${DISCORD_WEBHOOK_URL}"

# Workflow Configuration
workflows:
  # Workflow Engine
  engine:
    enabled: true
    max_concurrent: 10
    default_timeout: 3600  # seconds
    retry_policy:
      max_retries: 3
      backoff_multiplier: 2
    
  # Predefined Workflows
  templates:
    - security_audit
    - performance_optimization
    - dependency_update
    - release_preparation
    - ecosystem_analysis
    
  # Triggers
  triggers:
    schedule:
      security_scan: "0 0 * * *"  # Daily
      dependency_update: "0 0 * * 1"  # Weekly
      ecosystem_analysis: "0 0 1 * *"  # Monthly
      
    events:
      - type: "push"
        branch: "main"
        workflow: "security_scan"
        
      - type: "pull_request"
        action: "opened"
        workflow: "code_review"
        
      - type: "issue"
        label: "security"
        workflow: "security_audit"

# AI Configuration
ai:
  # Ollama Settings
  ollama:
    host: "http://localhost:11434"
    models:
      code_analysis: "llama3.1:8b"
      security_analysis: "llama3.1:8b"
      documentation: "llama3.1:8b"
      vision: "llava:13b"
    
    # Function Calling
    function_calling:
      enabled: true
      max_iterations: 5
      timeout: 60
  
  # AI Features
  features:
    code_review: true
    security_analysis: true
    performance_optimization: true
    documentation_generation: true
    test_generation: true
    refactoring_suggestions: true

# MCP Configuration
mcp:
  servers:
    - name: github
      host: localhost
      port: 3001
      auto_start: true
      capabilities:
        - repository_management
        - issue_tracking
        - pull_requests
        - workflow_automation
        
    - name: analytics
      host: localhost
      port: 3002
      auto_start: true
      capabilities:
        - metrics_collection
        - trend_analysis
        - reporting
        
    - name: security
      host: localhost
      port: 3003
      auto_start: true
      capabilities:
        - vulnerability_scanning
        - secret_detection
        - compliance_checking

# Advanced Features
advanced_features:
  # Predictive Analytics
  predictive_analytics:
    enabled: true
    models:
      - activity_prediction
      - issue_prediction
      - security_risk_prediction
    update_interval: 86400  # Daily
    
  # Auto-remediation
  auto_remediation:
    enabled: true
    approval_required: false
    create_prs: true
    auto_merge_threshold: 0.95
    
  # Self-healing
  self_healing:
    enabled: true
    monitor_interval: 300
    auto_restart_services: true
    auto_scale_resources: true
    
  # Machine Learning Pipeline
  ml_pipeline:
    enabled: true
    models_path: "~/.llamasearch/models"
    training_schedule: "0 0 * * 0"  # Weekly
    features:
      - code_pattern_recognition
      - anomaly_detection
      - quality_prediction

# Export Configuration
export:
  # Concatenation Settings
  concatenation:
    output_path: "~/Documents/llamasearchai_exports"
    formats: ["txt", "markdown", "json"]
    max_file_size_mb: 100
    compression: true
    
    # Language-specific rules
    languages:
      python:
        extensions: [".py", ".pyx", ".pyi"]
        priority_files: ["setup.py", "pyproject.toml", "requirements.txt"]
        ignore_patterns: ["__pycache__", "*.pyc", ".pytest_cache"]
        
      rust:
        extensions: [".rs"]
        priority_files: ["Cargo.toml", "src/lib.rs", "src/main.rs"]
        ignore_patterns: ["target/"]
        
      javascript:
        extensions: [".js", ".jsx", ".ts", ".tsx"]
        priority_files: ["package.json", "index.js", "index.ts"]
        ignore_patterns: ["node_modules/", "dist/", "build/"]

# Monitoring Configuration
monitoring:
  # Health Checks
  health_checks:
    enabled: true
    interval: 60  # seconds
    endpoints:
      - "http://localhost:8000/health"
      - "http://localhost:8001/health"
    
  # Metrics Export
  metrics_export:
    prometheus:
      enabled: true
      port: 9090
      
    grafana:
      enabled: true
      dashboard_url: "http://localhost:3000"
      
  # Alerting
  alerting:
    enabled: true
    rules:
      - name: "high_memory_usage"
        condition: "memory_percent > 90"
        severity: "critical"
        action: "notify_and_scale"
        
      - name: "security_vulnerability"
        condition: "security_score < 70"
        severity: "high"
        action: "notify_security_team"
        
      - name: "low_test_coverage"
        condition: "test_coverage < 60"
        severity: "medium"
        action: "notify_dev_team"

# Development Settings
development:
  debug: false
  verbose_logging: false
  test_mode: false
  mock_external_services: false
  
# Production Settings
production:
  ssl_enabled: true
  rate_limiting:
    enabled: true
    requests_per_minute: 60
  backup:
    enabled: true
    schedule: "0 2 * * *"  # 2 AM daily
    retention_days: 30